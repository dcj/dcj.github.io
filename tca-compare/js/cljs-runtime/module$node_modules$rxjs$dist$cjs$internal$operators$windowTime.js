shadow$provide.module$node_modules$rxjs$dist$cjs$internal$operators$windowTime=function(global,require,module,exports){function dispatchWindowTimeSpanOnly(state){var subscriber=state.subscriber,windowTimeSpan=state.windowTimeSpan,window=state.window;window&&subscriber.closeWindow(window);state.window=subscriber.openWindow();this.schedule(state,windowTimeSpan)}function dispatchWindowCreation(state){var windowTimeSpan=state.windowTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,windowCreationInterval=
state.windowCreationInterval,window=subscriber.openWindow(),context={action:this,subscription:null};context.subscription=scheduler.schedule(dispatchWindowClose,windowTimeSpan,{subscriber:subscriber,window:window,context:context});this.add(context.subscription);this.schedule(state,windowCreationInterval)}function dispatchWindowClose(state){var subscriber=state.subscriber,window=state.window;(state=state.context)&&state.action&&state.subscription&&state.action.remove(state.subscription);subscriber.closeWindow(window)}
var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,
"__esModule",{value:!0});exports.windowTime=void 0;global=require("module$node_modules$rxjs$dist$cjs$internal$Subject");var async_1=require("module$node_modules$rxjs$dist$cjs$internal$scheduler$async");module=require("module$node_modules$rxjs$dist$cjs$internal$Subscriber");var isNumeric_1=require("module$node_modules$rxjs$dist$cjs$internal$util$isNumeric"),isScheduler_1=require("module$node_modules$rxjs$dist$cjs$internal$util$isScheduler"),lift_1=require("module$node_modules$rxjs$dist$cjs$internal$util$lift");
exports.windowTime=function(windowTimeSpan,JSCompiler_OptimizeArgumentsArray_p4,JSCompiler_OptimizeArgumentsArray_p5,JSCompiler_OptimizeArgumentsArray_p6){var scheduler=async_1.async,windowCreationInterval=null,maxWindowSize=Infinity;isScheduler_1.isScheduler(JSCompiler_OptimizeArgumentsArray_p6)&&(scheduler=JSCompiler_OptimizeArgumentsArray_p6);isScheduler_1.isScheduler(JSCompiler_OptimizeArgumentsArray_p5)?scheduler=JSCompiler_OptimizeArgumentsArray_p5:isNumeric_1.isNumeric(JSCompiler_OptimizeArgumentsArray_p5)&&
(maxWindowSize=Number(JSCompiler_OptimizeArgumentsArray_p5));isScheduler_1.isScheduler(JSCompiler_OptimizeArgumentsArray_p4)?scheduler=JSCompiler_OptimizeArgumentsArray_p4:isNumeric_1.isNumeric(JSCompiler_OptimizeArgumentsArray_p4)&&(windowCreationInterval=Number(JSCompiler_OptimizeArgumentsArray_p4));return function(source){return lift_1.lift(source,new WindowTimeOperator(windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler))}};var WindowTimeOperator=function(){function WindowTimeOperator(windowTimeSpan,
windowCreationInterval,maxWindowSize,scheduler){this.windowTimeSpan=windowTimeSpan;this.windowCreationInterval=windowCreationInterval;this.maxWindowSize=maxWindowSize;this.scheduler=scheduler}WindowTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new WindowTimeSubscriber(subscriber,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))};return WindowTimeOperator}(),CountedSubject=function(_super){function CountedSubject(){var _this=null!==
_super&&_super.apply(this,arguments)||this;_this._numberOfNextedValues=0;return _this}__extends(CountedSubject,_super);CountedSubject.prototype.next=function(value){this._numberOfNextedValues++;_super.prototype.next.call(this,value)};Object.defineProperty(CountedSubject.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!1,configurable:!0});return CountedSubject}(global.Subject),WindowTimeSubscriber=function(_super){function WindowTimeSubscriber(destination,
windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler){var _this=_super.call(this,destination)||this;_this.destination=destination;_this.maxWindowSize=maxWindowSize;_this.windows=[];destination=_this.openWindow();null!==windowCreationInterval&&0<=windowCreationInterval?(maxWindowSize={windowTimeSpan:windowTimeSpan,windowCreationInterval:windowCreationInterval,subscriber:_this,scheduler:scheduler},_this.add(scheduler.schedule(dispatchWindowClose,windowTimeSpan,{subscriber:_this,window:destination,
context:null})),_this.add(scheduler.schedule(dispatchWindowCreation,windowCreationInterval,maxWindowSize))):_this.add(scheduler.schedule(dispatchWindowTimeSpanOnly,windowTimeSpan,{subscriber:_this,window:destination,windowTimeSpan:windowTimeSpan}));return _this}__extends(WindowTimeSubscriber,_super);WindowTimeSubscriber.prototype._next=function(value){for(var windows=Infinity>this.maxWindowSize?this.windows.slice():this.windows,len=windows.length,i=0;i<len;i++){var window_1=windows[i];window_1.closed||
(window_1.next(value),this.maxWindowSize<=window_1.numberOfNextedValues&&this.closeWindow(window_1))}};WindowTimeSubscriber.prototype._error=function(err){for(var windows=this.windows;0<windows.length;)windows.shift().error(err);this.destination.error(err)};WindowTimeSubscriber.prototype._complete=function(){for(var windows=this.windows;0<windows.length;)windows.shift().complete();this.destination.complete()};WindowTimeSubscriber.prototype.openWindow=function(){var window=new CountedSubject;this.windows.push(window);
this.destination.next(window);return window};WindowTimeSubscriber.prototype.closeWindow=function(window){var index=this.windows.indexOf(window);0<=index&&(window.complete(),this.windows.splice(index,1))};return WindowTimeSubscriber}(module.Subscriber)}
//# sourceMappingURL=module$node_modules$rxjs$dist$cjs$internal$operators$windowTime.js.map
