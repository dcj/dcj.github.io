shadow$provide.module$node_modules$rxjs$dist$cjs$internal$operators$delayWhen=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,
b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.delayWhen=void 0;global=require("module$node_modules$rxjs$dist$cjs$internal$Subscriber");module=require("module$node_modules$rxjs$dist$cjs$internal$Observable");var innerSubscribe_1=require("module$node_modules$rxjs$dist$cjs$internal$innerSubscribe"),lift_1=require("module$node_modules$rxjs$dist$cjs$internal$util$lift");exports.delayWhen=function(delayDurationSelector,
subscriptionDelay){return subscriptionDelay?function(source){return lift_1.lift(new SubscriptionDelayObservable(source,subscriptionDelay),new DelayWhenOperator(delayDurationSelector))}:function(source){return lift_1.lift(source,new DelayWhenOperator(delayDurationSelector))}};var DelayWhenOperator=function(){function DelayWhenOperator(delayDurationSelector){this.delayDurationSelector=delayDurationSelector}DelayWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new DelayWhenSubscriber(subscriber,
this.delayDurationSelector))};return DelayWhenOperator}(),DelayWhenSubscriber=function(_super){function DelayWhenSubscriber(destination,delayDurationSelector){destination=_super.call(this,destination)||this;destination.delayDurationSelector=delayDurationSelector;destination.completed=!1;destination.delayNotifierSubscriptions=[];destination.index=0;return destination}__extends(DelayWhenSubscriber,_super);DelayWhenSubscriber.prototype.notifyNext=function(outerValue,_innerValue,_outerIndex,innerSub){this.destination.next(outerValue);
this.removeSubscription(innerSub);this.tryComplete()};DelayWhenSubscriber.prototype.notifyError=function(error){this._error(error)};DelayWhenSubscriber.prototype.notifyComplete=function(innerSub){(innerSub=this.removeSubscription(innerSub))&&this.destination.next(innerSub);this.tryComplete()};DelayWhenSubscriber.prototype._next=function(value){var index=this.index++;try{var delayNotifier=this.delayDurationSelector(value,index);delayNotifier&&this.tryDelay(delayNotifier,value)}catch(err){this.destination.error(err)}};
DelayWhenSubscriber.prototype._complete=function(){this.completed=!0;this.tryComplete();this.unsubscribe()};DelayWhenSubscriber.prototype.removeSubscription=function(subscription){subscription.unsubscribe();var subscriptionIdx=this.delayNotifierSubscriptions.indexOf(subscription);-1!==subscriptionIdx&&this.delayNotifierSubscriptions.splice(subscriptionIdx,1);return subscription.outerValue};DelayWhenSubscriber.prototype.tryDelay=function(delayNotifier,value){(delayNotifier=innerSubscribe_1.innerSubscribe(delayNotifier,
new innerSubscribe_1.ComplexInnerSubscriber(this,value,0)))&&!delayNotifier.closed&&(this.destination.add(delayNotifier),this.delayNotifierSubscriptions.push(delayNotifier))};DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()};return DelayWhenSubscriber}(innerSubscribe_1.ComplexOuterSubscriber),SubscriptionDelayObservable=function(_super){function SubscriptionDelayObservable(source,subscriptionDelay){var _this=
_super.call(this)||this;_this.source=source;_this.subscriptionDelay=subscriptionDelay;return _this}__extends(SubscriptionDelayObservable,_super);SubscriptionDelayObservable.prototype._subscribe=function(subscriber){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber,this.source))};return SubscriptionDelayObservable}(module.Observable),SubscriptionDelaySubscriber=function(_super){function SubscriptionDelaySubscriber(parent,source){var _this=_super.call(this)||this;_this.parent=
parent;_this.source=source;_this.sourceSubscribed=!1;return _this}__extends(SubscriptionDelaySubscriber,_super);SubscriptionDelaySubscriber.prototype._next=function(unused){this.subscribeToSource()};SubscriptionDelaySubscriber.prototype._error=function(err){this.unsubscribe();this.parent.error(err)};SubscriptionDelaySubscriber.prototype._complete=function(){this.unsubscribe();this.subscribeToSource()};SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=
!0,this.unsubscribe(),this.source.subscribe(this.parent))};return SubscriptionDelaySubscriber}(global.Subscriber)}
//# sourceMappingURL=module$node_modules$rxjs$dist$cjs$internal$operators$delayWhen.js.map
