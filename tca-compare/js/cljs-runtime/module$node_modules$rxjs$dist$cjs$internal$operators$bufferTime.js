shadow$provide.module$node_modules$rxjs$dist$cjs$internal$operators$bufferTime=function(global,require,module,exports){function dispatchBufferTimeSpanOnly(state){var subscriber=state.subscriber,prevContext=state.context;prevContext&&subscriber.closeContext(prevContext);subscriber.closed||(state.context=subscriber.openContext(),state.context.closeAction=this.schedule(state,state.bufferTimeSpan))}function dispatchBufferCreation(state){var bufferCreationInterval=state.bufferCreationInterval,bufferTimeSpan=
state.bufferTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,context=subscriber.openContext();subscriber.closed||(subscriber.add(context.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:subscriber,context:context})),this.schedule(state,bufferCreationInterval))}function dispatchBufferClose(arg){arg.subscriber.closeContext(arg.context)}var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.bufferTime=void 0;var async_1=require("module$node_modules$rxjs$dist$cjs$internal$scheduler$async");
global=require("module$node_modules$rxjs$dist$cjs$internal$Subscriber");var isScheduler_1=require("module$node_modules$rxjs$dist$cjs$internal$util$isScheduler"),lift_1=require("module$node_modules$rxjs$dist$cjs$internal$util$lift");exports.bufferTime=function(bufferTimeSpan){var length=arguments.length,scheduler=async_1.async;isScheduler_1.isScheduler(arguments[arguments.length-1])&&(scheduler=arguments[arguments.length-1],length--);var bufferCreationInterval=null;2<=length&&(bufferCreationInterval=
arguments[1]);var maxBufferSize=Infinity;3<=length&&(maxBufferSize=arguments[2]);return function(source){return lift_1.lift(source,new BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler))}};var BufferTimeOperator=function(){function BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){this.bufferTimeSpan=bufferTimeSpan;this.bufferCreationInterval=bufferCreationInterval;this.maxBufferSize=maxBufferSize;this.scheduler=scheduler}BufferTimeOperator.prototype.call=
function(subscriber,source){return source.subscribe(new BufferTimeSubscriber(subscriber,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))};return BufferTimeOperator}(),Context=function(){return function(){this.buffer=[]}}(),BufferTimeSubscriber=function(_super){function BufferTimeSubscriber(destination,bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){destination=_super.call(this,destination)||this;destination.bufferTimeSpan=bufferTimeSpan;destination.bufferCreationInterval=
bufferCreationInterval;destination.maxBufferSize=maxBufferSize;destination.scheduler=scheduler;destination.contexts=[];maxBufferSize=destination.openContext();destination.timespanOnly=null==bufferCreationInterval||0>bufferCreationInterval;if(destination.timespanOnly)destination.add(maxBufferSize.closeAction=scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,{subscriber:destination,context:maxBufferSize,bufferTimeSpan:bufferTimeSpan}));else{var creationState={bufferTimeSpan:bufferTimeSpan,
bufferCreationInterval:bufferCreationInterval,subscriber:destination,scheduler:scheduler};destination.add(maxBufferSize.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:destination,context:maxBufferSize}));destination.add(scheduler.schedule(dispatchBufferCreation,bufferCreationInterval,creationState))}return destination}__extends(BufferTimeSubscriber,_super);BufferTimeSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,filledBufferContext,
i=0;i<len;i++){var context_1=contexts[i],buffer=context_1.buffer;buffer.push(value);buffer.length==this.maxBufferSize&&(filledBufferContext=context_1)}if(filledBufferContext)this.onBufferFull(filledBufferContext)};BufferTimeSubscriber.prototype._error=function(err){this.contexts.length=0;_super.prototype._error.call(this,err)};BufferTimeSubscriber.prototype._complete=function(){for(var contexts=this.contexts,destination=this.destination;0<contexts.length;){var context_2=contexts.shift();destination.next(context_2.buffer)}_super.prototype._complete.call(this)};
BufferTimeSubscriber.prototype.unsubscribe=function(){this.closed||(this.contexts=null,_super.prototype.unsubscribe.call(this))};BufferTimeSubscriber.prototype.onBufferFull=function(context){this.closeContext(context);context=context.closeAction;context.unsubscribe();this.remove(context);if(!this.closed&&this.timespanOnly){context=this.openContext();var bufferTimeSpan=this.bufferTimeSpan;this.add(context.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,{subscriber:this,
context:context,bufferTimeSpan:bufferTimeSpan}))}};BufferTimeSubscriber.prototype.openContext=function(){var context=new Context;this.contexts.push(context);return context};BufferTimeSubscriber.prototype.closeContext=function(context){this.destination.next(context.buffer);var contexts=this.contexts;0<=(contexts?contexts.indexOf(context):-1)&&contexts.splice(contexts.indexOf(context),1)};return BufferTimeSubscriber}(global.Subscriber)}
//# sourceMappingURL=module$node_modules$rxjs$dist$cjs$internal$operators$bufferTime.js.map
