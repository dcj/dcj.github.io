{
"version":3,
"file":"module$node_modules$rxjs$dist$cjs$internal$ReplaySubject.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/rxjs/dist/cjs/internal/ReplaySubject.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rxjs$dist$cjs$internal$ReplaySubject\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReplaySubject = void 0;\nvar Subject_1 = require(\"./Subject\");\nvar Subscription_1 = require(\"./Subscription\");\nvar ObjectUnsubscribedError_1 = require(\"./util/ObjectUnsubscribedError\");\nvar SubjectSubscription_1 = require(\"./SubjectSubscription\");\nvar dateTimestampProvider_1 = require(\"./scheduler/dateTimestampProvider\");\nvar ReplaySubject = (function (_super) {\n    __extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, timestampProvider) {\n        if (bufferSize === void 0) { bufferSize = Infinity; }\n        if (windowTime === void 0) { windowTime = Infinity; }\n        if (timestampProvider === void 0) { timestampProvider = dateTimestampProvider_1.dateTimestampProvider; }\n        var _this = _super.call(this) || this;\n        _this.timestampProvider = timestampProvider;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Infinity) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push({ time: this._getNow(), value: value });\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription_1.Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription_1.SubjectSubscription(this, subscriber);\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        var scheduler = this.timestampProvider;\n        return scheduler ? scheduler.now() : dateTimestampProvider_1.dateTimestampProvider.now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject_1.Subject));\nexports.ReplaySubject = ReplaySubject;\n//# sourceMappingURL=ReplaySubject.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","defineProperty","value","ReplaySubject","Subject_1","Subscription_1","ObjectUnsubscribedError_1","SubjectSubscription_1","dateTimestampProvider_1","_super","bufferSize","windowTime","timestampProvider","Infinity","dateTimestampProvider","_this","_events","_infiniteTimeWindow","_bufferSize","_windowTime","next","nextInfiniteTimeWindow","nextTimeWindow","ReplaySubject.prototype.nextInfiniteTimeWindow","push","length","shift","ReplaySubject.prototype.nextTimeWindow","time","_getNow","_trimBufferThenGetEvents","_subscribe","ReplaySubject.prototype._subscribe","subscriber","len","closed","ObjectUnsubscribedError","isStopped","hasError","subscription","Subscription","EMPTY","observers","SubjectSubscription","i","error","thrownError","complete","ReplaySubject.prototype._getNow","scheduler","now","ReplaySubject.prototype._trimBufferThenGetEvents","eventsCount","spliceCount","Math","max","splice","Subject"]
}
